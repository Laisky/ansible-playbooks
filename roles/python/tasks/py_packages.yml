---
- name: Install python packages
  tags: python
  # sometimes origin pip is faster than mirror
  # pip: name={{item}} extra_args='--trusted-host pypi.mirrors.ustc.edu.cn -i http://pypi.mirrors.ustc.edu.cn/simple'
  pip: name={{item}}
  with_items:
    - virtualenv
    - uwsgi

- name: Replace pyenv shims pyenv
  tags: python
  become: True
  shell: "ln -sf {{home}}/.pyenv/versions/2.7.10/bin/{{item}} {{home}}/.pyenv/shims/."
  with_items:
    - virtualenv
    - uwsgi

- name: Replace /usr/local/bin/pyenv
  tags: python
  become: True
  shell: "ln -sf {{home}}/.pyenv/versions/2.7.10/bin/{{item}} /usr/local/bin/."
  with_items:
    - virtualenv
    - uwsgi
